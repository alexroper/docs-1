---
title: craft\services\ProjectConfig
code:
  - php
  - twig
---

# ProjectConfig

Type

:   Class

Namespace

:   craft\services

Inherits

:   [craft\services\ProjectConfig](craft-services-projectconfig.md) &raquo;
[yii\base\Component](https://www.yiiframework.com/doc/api/2.0/yii-base-component) &raquo;
[yii\base\BaseObject](https://www.yiiframework.com/doc/api/2.0/yii-base-baseobject)

Implements

:   [yii\base\Configurable](https://www.yiiframework.com/doc/api/2.0/yii-base-configurable)

Since

:   3.1.0



Project config service.

An instance of the ProjectConfig service is globally accessible in Craft via [`Craft::$app->projectConfig`](craft-base-applicationtrait.md#method-getprojectconfig).



[View source](https://github.com/craftcms/cms/blob/master/src/services/ProjectConfig.php)


## Public Properties

| Property                                                                                                                   | Description
| -------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------
| [areConfigSchemaVersionsCompatible](craft-services-projectconfig.md#areconfigschemaversionscompatible)                     | [boolean](http://php.net/language.types.boolean), [array](http://php.net/language.types.array)
| [behaviors](https://www.yiiframework.com/doc/api/2.0/yii-base-component#$behaviors-detail "Defined by yii\base\Component") | [yii\base\Behavior](https://www.yiiframework.com/doc/api/2.0/yii-base-behavior) – List of behaviors attached to this component
| [forceUpdate](craft-services-projectconfig.md#forceupdate)                                                                 | [boolean](http://php.net/language.types.boolean) – Whether project config should force updates on entries that aren't new or being removed.
| [isApplyingYamlChanges](craft-services-projectconfig.md#isapplyingyamlchanges)                                             | [boolean](http://php.net/language.types.boolean)
| [maxDefers](craft-services-projectconfig.md#maxdefers)                                                                     | [integer](http://php.net/language.types.integer) – The maximum number of times deferred events can be re-deferred before we give up on them
| [maxDeltas](craft-services-projectconfig.md#maxdeltas)                                                                     | [integer](http://php.net/language.types.integer) – The maximum number of project.
| [muteEvents](craft-services-projectconfig.md#muteevents)                                                                   | [boolean](http://php.net/language.types.boolean) – Whether events generated by config changes should be muted.
| [pendingChangeSummary](craft-services-projectconfig.md#pendingchangesummary)                                               | [array](http://php.net/language.types.array)
| [readOnly](craft-services-projectconfig.md#readonly)                                                                       | [boolean](http://php.net/language.types.boolean) – Whether the project config is read-only.

### `areConfigSchemaVersionsCompatible`



Type

:   [boolean](http://php.net/language.types.boolean), [array](http://php.net/language.types.array)

Access

:   Read-only







[View source](https://github.com/craftcms/cms/blob/master/src/services/ProjectConfig.php)



### `forceUpdate`



Type

:   [boolean](http://php.net/language.types.boolean)



Whether project config should force updates on entries that aren't new or being removed.



[View source](https://github.com/craftcms/cms/blob/master/src/services/ProjectConfig.php#L192)



### `isApplyingYamlChanges`



Type

:   [boolean](http://php.net/language.types.boolean)

Access

:   Read-only







[View source](https://github.com/craftcms/cms/blob/master/src/services/ProjectConfig.php)



### `maxDefers`



Type

:   [integer](http://php.net/language.types.integer)



The maximum number of times deferred events can be re-deferred before we give up on them

See also:

- [defer()](craft-services-projectconfig.md#method-defer)
- `\craft\services\_applyChanges()`


[View source](https://github.com/craftcms/cms/blob/master/src/services/ProjectConfig.php#L176)



### `maxDeltas`



Type

:   [integer](http://php.net/language.types.integer)

Since

:   3.4.0



The maximum number of project.yaml deltas to store in storage/config-backups/



[View source](https://github.com/craftcms/cms/blob/master/src/services/ProjectConfig.php#L169)



### `muteEvents`



Type

:   [boolean](http://php.net/language.types.boolean)

Since

:   3.1.2



Whether events generated by config changes should be muted.



[View source](https://github.com/craftcms/cms/blob/master/src/services/ProjectConfig.php#L187)



### `pendingChangeSummary`



Type

:   [array](http://php.net/language.types.array)

Access

:   Read-only







[View source](https://github.com/craftcms/cms/blob/master/src/services/ProjectConfig.php)



### `readOnly`



Type

:   [boolean](http://php.net/language.types.boolean)



Whether the project config is read-only.



[View source](https://github.com/craftcms/cms/blob/master/src/services/ProjectConfig.php#L181)







## Public Methods

| Method                                                                                                                                      | Description
| ------------------------------------------------------------------------------------------------------------------------------------------- | -----------------------------------------------------------------------------------------------------------------------------------------------------------------------
| [__call()](https://www.yiiframework.com/doc/api/2.0/yii-base-baseobject#__call()-detail "Defined by yii\base\BaseObject")                   | Calls the named method which is not a class method.
| [__clone()](https://www.yiiframework.com/doc/api/2.0/yii-base-component#__clone()-detail "Defined by yii\base\Component")                   | This method is called after the object is created by cloning an existing one.
| [__construct()](craft-services-projectconfig.md#method-construct)                                                                           | Constructor.
| [__get()](https://www.yiiframework.com/doc/api/2.0/yii-base-baseobject#__get()-detail "Defined by yii\base\BaseObject")                     | Returns the value of an object property.
| [__isset()](https://www.yiiframework.com/doc/api/2.0/yii-base-baseobject#__isset()-detail "Defined by yii\base\BaseObject")                 | Checks if a property is set, i.e. defined and not null.
| [__set()](https://www.yiiframework.com/doc/api/2.0/yii-base-baseobject#__set()-detail "Defined by yii\base\BaseObject")                     | Sets value of an object property.
| [__unset()](https://www.yiiframework.com/doc/api/2.0/yii-base-baseobject#__unset()-detail "Defined by yii\base\BaseObject")                 | Sets an object property to null.
| [applyConfigChanges()](craft-services-projectconfig.md#method-applyconfigchanges)                                                           | Applies given changes to the project config.
| [applyYamlChanges()](craft-services-projectconfig.md#method-applyyamlchanges)                                                               | Applies changes in `project.yaml` to the project config.
| [areChangesPending()](craft-services-projectconfig.md#method-arechangespending)                                                             | Returns whether a given path has pending changes that need to be applied to the loaded project config.
| [attachBehavior()](https://www.yiiframework.com/doc/api/2.0/yii-base-component#attachBehavior()-detail "Defined by yii\base\Component")     | Attaches a behavior to this component.
| [attachBehaviors()](https://www.yiiframework.com/doc/api/2.0/yii-base-component#attachBehaviors()-detail "Defined by yii\base\Component")   | Attaches a list of behaviors to the component.
| [behaviors()](https://www.yiiframework.com/doc/api/2.0/yii-base-component#behaviors()-detail "Defined by yii\base\Component")               | Returns a list of behaviors that this component should behave as.
| [canGetProperty()](https://www.yiiframework.com/doc/api/2.0/yii-base-baseobject#canGetProperty()-detail "Defined by yii\base\BaseObject")   | Returns a value indicating whether a property can be read.
| [canSetProperty()](https://www.yiiframework.com/doc/api/2.0/yii-base-baseobject#canSetProperty()-detail "Defined by yii\base\BaseObject")   | Returns a value indicating whether a property can be set.
| [className()](https://www.yiiframework.com/doc/api/2.0/yii-base-baseobject#className()-detail "Defined by yii\base\BaseObject")             | Returns the fully qualified name of this class.
| [defer()](craft-services-projectconfig.md#method-defer)                                                                                     | Defers an event until all other project config changes have been processed.
| [detachBehavior()](https://www.yiiframework.com/doc/api/2.0/yii-base-component#detachBehavior()-detail "Defined by yii\base\Component")     | Detaches a behavior from the component.
| [detachBehaviors()](https://www.yiiframework.com/doc/api/2.0/yii-base-component#detachBehaviors()-detail "Defined by yii\base\Component")   | Detaches all behaviors from the component.
| [ensureBehaviors()](https://www.yiiframework.com/doc/api/2.0/yii-base-component#ensureBehaviors()-detail "Defined by yii\base\Component")   | Makes sure that the behaviors declared in [behaviors()](https://www.yiiframework.com/doc/api/2.0/yii-base-component#behaviors()-detail) are attached to this component.
| [get()](craft-services-projectconfig.md#method-get)                                                                                         | Returns a config item value value by its path.
| [getAreConfigSchemaVersionsCompatible()](craft-services-projectconfig.md#method-getareconfigschemaversionscompatible)                       | Returns whether all schema versions stored in the config are compatible with the actual codebase.
| [getBehavior()](https://www.yiiframework.com/doc/api/2.0/yii-base-component#getBehavior()-detail "Defined by yii\base\Component")           | Returns the named behavior object.
| [getBehaviors()](https://www.yiiframework.com/doc/api/2.0/yii-base-component#getBehaviors()-detail "Defined by yii\base\Component")         | Returns all behaviors attached to this component.
| [getIsApplyingYamlChanges()](craft-services-projectconfig.md#method-getisapplyingyamlchanges)                                               | Returns whether project.yaml changes are currently being applied
| [getPendingChangeSummary()](craft-services-projectconfig.md#method-getpendingchangesummary)                                                 | Returns a summary of all pending config changes.
| [handleChangeEvent()](craft-services-projectconfig.md#method-handlechangeevent)                                                             | Handles a config change event.
| [hasEventHandlers()](https://www.yiiframework.com/doc/api/2.0/yii-base-component#hasEventHandlers()-detail "Defined by yii\base\Component") | Returns a value indicating whether there is any handler attached to the named event.
| [hasMethod()](https://www.yiiframework.com/doc/api/2.0/yii-base-baseobject#hasMethod()-detail "Defined by yii\base\BaseObject")             | Returns a value indicating whether a method is defined.
| [hasProperty()](https://www.yiiframework.com/doc/api/2.0/yii-base-baseobject#hasProperty()-detail "Defined by yii\base\BaseObject")         | Returns a value indicating whether a property is defined.
| [init()](craft-services-projectconfig.md#method-init)                                                                                       | Initializes the object.
| [off()](https://www.yiiframework.com/doc/api/2.0/yii-base-component#off()-detail "Defined by yii\base\Component")                           | Detaches an existing event handler from this component.
| [on()](https://www.yiiframework.com/doc/api/2.0/yii-base-component#on()-detail "Defined by yii\base\Component")                             | Attaches an event handler to an event.
| [onAdd()](craft-services-projectconfig.md#method-onadd)                                                                                     | Attaches an event handler for when an item is added to the config at a given path.
| [onRemove()](craft-services-projectconfig.md#method-onremove)                                                                               | Attaches an event handler for when an item is removed from the config at a given path.
| [onUpdate()](craft-services-projectconfig.md#method-onupdate)                                                                               | Attaches an event handler for when an item is updated in the config at a given path.
| [processConfigChanges()](craft-services-projectconfig.md#method-processconfigchanges)                                                       | Processes changes in `config/project.yaml` for a given path.
| [rebuild()](craft-services-projectconfig.md#method-rebuild)                                                                                 | Rebuilds the project config from the current state in the database.
| [regenerateYamlFromConfig()](craft-services-projectconfig.md#method-regenerateyamlfromconfig)                                               | Regenerates `project.yaml` based on the loaded project config.
| [registerChangeEventHandler()](craft-services-projectconfig.md#method-registerchangeeventhandler)                                           | Registers a config change event listener, for a specific config path pattern.
| [remove()](craft-services-projectconfig.md#method-remove)                                                                                   | Removes a config item at the given path.
| [saveModifiedConfigData()](craft-services-projectconfig.md#method-savemodifiedconfigdata)                                                   | Saves all the config data that has been modified up to now.
| [set()](craft-services-projectconfig.md#method-set)                                                                                         | Sets a config item value at the given path.
| [trigger()](https://www.yiiframework.com/doc/api/2.0/yii-base-component#trigger()-detail "Defined by yii\base\Component")                   | Triggers an event.
| [updateParsedConfigTimes()](craft-services-projectconfig.md#method-updateparsedconfigtimes)                                                 | Updates cached config file modified times immediately.
| [updateParsedConfigTimesAfterRequest()](craft-services-projectconfig.md#method-updateparsedconfigtimesafterrequest)                         | Updates cached config file modified times after the request ends.
| [updateStoredConfigAfterRequest()](craft-services-projectconfig.md#method-updatestoredconfigafterrequest)                                   | Updates the stored config after the request ends.

### `__construct()`





Constructor.



The default implementation does two things:

- Initializes the object with the given configuration `$config`.
- Call [init()](craft-services-projectconfig.md#method-init).

If this method is overridden in a child class, it is recommended that

- the last parameter of the constructor is a configuration array, like `$config` here.
- call the parent implementation at the end of the constructor.




[View source](https://github.com/craftcms/cms/blob/master/src/services/ProjectConfig.php#L334-L342)


#### Arguments

- `$config` ([array](http://php.net/language.types.array)) – Name-value pairs that will be used to initialize the object properties




### `applyConfigChanges()`





Applies given changes to the project config.




[View source](https://github.com/craftcms/cms/blob/master/src/services/ProjectConfig.php#L553-L569)


#### Arguments

- `$configData` ([array](http://php.net/language.types.array))




### `applyYamlChanges()`





Applies changes in `project.yaml` to the project config.




[View source](https://github.com/craftcms/cms/blob/master/src/services/ProjectConfig.php#L523-L546)






### `areChangesPending()`





Returns whether a given path has pending changes that need to be applied to the loaded project config.




[View source](https://github.com/craftcms/cms/blob/master/src/services/ProjectConfig.php#L588-L631)


#### Arguments

- `$path` ([string](http://php.net/language.types.string), [null](http://php.net/language.types.null)) – A specific config path that should be checked for pending changes.
If this is null, then `true` will be returned if there are *any* pending changes in `project.yaml.`.

#### Returns

[boolean](http://php.net/language.types.boolean)



### `defer()`



Since

:   3.1.13



Defers an event until all other project config changes have been processed.




[View source](https://github.com/craftcms/cms/blob/master/src/services/ProjectConfig.php#L1047-L1051)


#### Arguments

- `$event` ([craft\events\ConfigEvent](craft-events-configevent.md))
- `$handler` ([callable](http://php.net/language.types.callable))




### `get()`





Returns a config item value value by its path.




[View source](https://github.com/craftcms/cms/blob/master/src/services/ProjectConfig.php#L394-L407)


#### Arguments

- `$path` ([string](http://php.net/language.types.string), [null](http://php.net/language.types.null)) – The config item path, or `null` if the entire config should be returned
- `$getFromYaml` ([boolean](http://php.net/language.types.boolean)) – Whether data should be fetched from `config/project.yaml` instead of the loaded config. Defaults to `false`.

#### Returns

`mixed` – The config item value


---

#### Example

::: code
```php
$value = Craft::$app->projectConfig->get('foo.bar');
```
:::


### `getAreConfigSchemaVersionsCompatible()`





Returns whether all schema versions stored in the config are compatible with the actual codebase.

The schemas must match exactly to avoid unpredictable behavior that can occur when running migrations
and applying project config changes at the same time.


[View source](https://github.com/craftcms/cms/blob/master/src/services/ProjectConfig.php#L892-L929)


#### Arguments

- `$issues` ([array](http://php.net/language.types.array)) – Passed by reference and populated with issues on error in
                     the following format: `[$pluginName, $existingSchema, $incomingSchema]`

#### Returns

[boolean](http://php.net/language.types.boolean), [array](http://php.net/language.types.array)



### `getIsApplyingYamlChanges()`





Returns whether project.yaml changes are currently being applied




[View source](https://github.com/craftcms/cms/blob/master/src/services/ProjectConfig.php#L576-L579)



#### Returns

[boolean](http://php.net/language.types.boolean)



### `getPendingChangeSummary()`





Returns a summary of all pending config changes.




[View source](https://github.com/craftcms/cms/blob/master/src/services/ProjectConfig.php#L862-L880)



#### Returns

[array](http://php.net/language.types.array)



### `handleChangeEvent()`



Since

:   3.4.0



Handles a config change event.




[View source](https://github.com/craftcms/cms/blob/master/src/services/ProjectConfig.php#L1080-L1109)


#### Arguments

- `$event` ([craft\events\ConfigEvent](craft-events-configevent.md))




### `init()`





Initializes the object.



This method is invoked at the end of the constructor after the object is initialized with the
given configuration.




[View source](https://github.com/craftcms/cms/blob/master/src/services/ProjectConfig.php#L347-L356)






### `onAdd()`





Attaches an event handler for when an item is added to the config at a given path.




[View source](https://github.com/craftcms/cms/blob/master/src/services/ProjectConfig.php#L971-L975)


#### Arguments

- `$path` ([string](http://php.net/language.types.string)) – The config path pattern. Can contain `{uri}` tokens, which will be passed to the handler.
- `$handler` ([callable](http://php.net/language.types.callable)) – The handler method.
- `$data` (`mixed`) – The data to be passed to the event handler when the event is triggered.
When the event handler is invoked, this data can be accessed via [craft\events\ConfigEvent::$data](https://www.yiiframework.com/doc/api/2.0/yii-base-event#$data-detail).

#### Returns

`static` – Self reference


---

#### Example

::: code
```php
use craft\events\ConfigEvent;
use craft\helpers\Db;

Craft::$app->projectConfig->onAdd('foo.{uid}', function(ConfigEvent $event) {
    // Get the UID from the item path
    $uid = $event->tokenMatches[0];

    // Prep the row data
    $data = array_merge($event->newValue);

    // See if the row already exists (maybe it was soft-deleted)
    $id = Db::idByUid('{{%tablename}}', $uid);

    if ($id) {
        $data['dateDeleted'] = null;
        Craft::$app->db->createCommand()->update('{{%tablename}}', $data, [
            'id' => $id,
        ]);
    } else {
        $data['uid'] = $uid;
        Craft::$app->db->createCommand()->insert('{{%tablename}}', $data);
    }
});
```
:::


### `onRemove()`





Attaches an event handler for when an item is removed from the config at a given path.




[View source](https://github.com/craftcms/cms/blob/master/src/services/ProjectConfig.php#L1034-L1038)


#### Arguments

- `$path` ([string](http://php.net/language.types.string)) – The config path pattern. Can contain `{uri}` tokens, which will be passed to the handler.
- `$handler` ([callable](http://php.net/language.types.callable)) – The handler method.
- `$data` (`mixed`) – The data to be passed to the event handler when the event is triggered.
When the event handler is invoked, this data can be accessed via [craft\events\ConfigEvent::$data](https://www.yiiframework.com/doc/api/2.0/yii-base-event#$data-detail).

#### Returns

`static` – Self reference


---

#### Example

::: code
```php
use craft\events\ConfigEvent;

Craft::$app->projectConfig->onRemove('foo.{uid}', function(ConfigEvent $event) {
    // Get the UID from the item path
    $uid = $event->tokenMatches[0];

    // Soft-delete the item from the database
    Craft::$app->db->createCommand()->softDelete('{{%tablename}}', [
        'uid' => $uid,
    ]);
});
```
:::


### `onUpdate()`





Attaches an event handler for when an item is updated in the config at a given path.




[View source](https://github.com/craftcms/cms/blob/master/src/services/ProjectConfig.php#L1003-L1007)


#### Arguments

- `$path` ([string](http://php.net/language.types.string)) – The config path pattern. Can contain `{uri}` tokens, which will be passed to the handler.
- `$handler` ([callable](http://php.net/language.types.callable)) – The handler method.
- `$data` (`mixed`) – The data to be passed to the event handler when the event is triggered.
When the event handler is invoked, this data can be accessed via [craft\events\ConfigEvent::$data](https://www.yiiframework.com/doc/api/2.0/yii-base-event#$data-detail).

#### Returns

`static` – Self reference


---

#### Example

::: code
```php
use craft\events\ConfigEvent;

Craft::$app->projectConfig->onUpdate('foo.{uid}', function(ConfigEvent $event) {
    // Get the UID from the item path
    $uid = $event->tokenMatches[0];

    // Update the item in the database
    $data = array_merge($event->newValue);
    Craft::$app->db->createCommand()->update('{{%tablename}}', $data, [
        'uid' => $uid,
    ]);
});
```
:::


### `processConfigChanges()`





Processes changes in `config/project.yaml` for a given path.




[View source](https://github.com/craftcms/cms/blob/master/src/services/ProjectConfig.php#L641-L700)


#### Arguments

- `$path` ([string](http://php.net/language.types.string)) – The config item path
- `$triggerUpdate` ([boolean](http://php.net/language.types.boolean)) – Is set to true and no changes are detected, an update event will be triggered, anyway.
- `$message` ([string](http://php.net/language.types.string), [null](http://php.net/language.types.null)) – The message describing changes, if modifications are made.
- `$force` ([boolean](http://php.net/language.types.boolean)) – Whether the config change should be processed regardless of previous records




### `rebuild()`



Since

:   3.1.20



Rebuilds the project config from the current state in the database.




[View source](https://github.com/craftcms/cms/blob/master/src/services/ProjectConfig.php#L1137-L1173)




#### Throws

- [Throwable](http://php.net/class.throwable)\
  if reasons


### `regenerateYamlFromConfig()`





Regenerates `project.yaml` based on the loaded project config.




[View source](https://github.com/craftcms/cms/blob/master/src/services/ProjectConfig.php#L511-L518)






### `registerChangeEventHandler()`





Registers a config change event listener, for a specific config path pattern.




[View source](https://github.com/craftcms/cms/blob/master/src/services/ProjectConfig.php#L1062-L1072)


#### Arguments

- `$event` ([string](http://php.net/language.types.string)) – The event name
- `$path` ([string](http://php.net/language.types.string)) – The config path pattern. Can contain `{uid}` tokens, which will be passed to the handler.
- `$handler` ([callable](http://php.net/language.types.callable)) – The handler method.
- `$data` (`mixed`) – The data to be passed to the event handler when the event is triggered.
When the event handler is invoked, this data can be accessed via [craft\events\ConfigEvent::$data](https://www.yiiframework.com/doc/api/2.0/yii-base-event#$data-detail).




### `remove()`





Removes a config item at the given path.




[View source](https://github.com/craftcms/cms/blob/master/src/services/ProjectConfig.php#L503-L506)


#### Arguments

- `$path` ([string](http://php.net/language.types.string)) – The config item path
- `$message` ([string](http://php.net/language.types.string), [null](http://php.net/language.types.null)) – The message describing changes.



---

#### Example

::: code
```php
Craft::$app->projectConfig->remove('foo.bar');
```
:::


### `saveModifiedConfigData()`





Saves all the config data that has been modified up to now.




[View source](https://github.com/craftcms/cms/blob/master/src/services/ProjectConfig.php#L739-L855)




#### Throws

- [yii\base\ErrorException](https://www.yiiframework.com/doc/api/2.0/yii-base-errorexception)


### `set()`





Sets a config item value at the given path.




[View source](https://github.com/craftcms/cms/blob/master/src/services/ProjectConfig.php#L426-L490)


#### Arguments

- `$path` ([string](http://php.net/language.types.string)) – The config item path
- `$value` (`mixed`) – The config item value
- `$message` ([string](http://php.net/language.types.string), [null](http://php.net/language.types.null)) – The message describing changes.


#### Throws

- [yii\base\NotSupportedException](https://www.yiiframework.com/doc/api/2.0/yii-base-notsupportedexception)\
  if the service is set to read-only mode
- [yii\base\ErrorException](https://www.yiiframework.com/doc/api/2.0/yii-base-errorexception)
- [yii\base\Exception](https://www.yiiframework.com/doc/api/2.0/yii-base-exception)
- [yii\web\ServerErrorHttpException](https://www.yiiframework.com/doc/api/2.0/yii-web-servererrorhttpexception)

---

#### Example

::: code
```php
Craft::$app->projectConfig->set('foo.bar', 'value');
```
:::


### `updateParsedConfigTimes()`





Updates cached config file modified times immediately.




[View source](https://github.com/craftcms/cms/blob/master/src/services/ProjectConfig.php#L728-L732)



#### Returns

[boolean](http://php.net/language.types.boolean)



### `updateParsedConfigTimesAfterRequest()`





Updates cached config file modified times after the request ends.




[View source](https://github.com/craftcms/cms/blob/master/src/services/ProjectConfig.php#L713-L721)






### `updateStoredConfigAfterRequest()`





Updates the stored config after the request ends.




[View source](https://github.com/craftcms/cms/blob/master/src/services/ProjectConfig.php#L705-L708)








## Protected Methods

| Method                                                                              | Description
| ----------------------------------------------------------------------------------- | --------------------------------------------------------------
| [encodeValueAsString()](craft-services-projectconfig.md#method-encodevalueasstring) | Returns a project config compatible value encoded for storage.

### `encodeValueAsString()`





Returns a project config compatible value encoded for storage.




[View source](https://github.com/craftcms/cms/blob/master/src/services/ProjectConfig.php#L2618-L2621)


#### Arguments

- `$value`

#### Returns

[string](http://php.net/language.types.string)





## Constants

| Constant                    | Description
| --------------------------- | ----------------------------------------------------------------
| `CACHE_DURATION`            |
| `CACHE_KEY`                 |
| `CONFIG_ALL_KEY`            | Key to use when memoizing the entire config array
| `CONFIG_ASSOC_KEY`          | Key to use for signaling ordered-to-associative array conversion
| `CONFIG_DELTA_FILENAME`     | Filename for base config delta files
| `CONFIG_FILENAME`           |
| `CONFIG_KEY`                |
| `CONFIG_SCHEMA_VERSION_KEY` |
| `STORED_CACHE_KEY`          |
| `UID_PATTERN`               |


## Events

### EVENT_ADD_ITEM



Type

:   [craft\events\ConfigEvent](craft-events-configevent.md)



The event that is triggered when an item is added to the config.





---

#### Example

::: code
```php
use craft\events\ParseConfigEvent;
use craft\services\ProjectConfig;
use yii\base\Event;

Event::on(ProjectConfig::class, ProjectConfig::EVENT_ADD_ITEM, function(ParseConfigEvent $e) {
    // Ensure the item is also added in the database...
});
```
:::


### EVENT_AFTER_APPLY_CHANGES



Type

:   `\craft\services\Event`



The event that is triggered after pending changes in `config/project.yaml` have been applied.



---



### EVENT_REBUILD



Type

:   [craft\events\RebuildConfigEvent](craft-events-rebuildconfigevent.md)

Since

:   3.1.20



The event that is triggered when the project config is being rebuilt.





---

#### Example

::: code
```php
use craft\events\RebuildConfigEvent;
use craft\services\ProjectConfig;
use yii\base\Event;

Event::on(ProjectConfig::class, ProjectConfig::EVENT_REBUILD, function(RebuildConfigEvent $e) {
    // Add plugin's project config data...
   $e->config['myPlugin']['key'] = $value;
});
```
:::


### EVENT_REMOVE_ITEM



Type

:   [craft\events\ConfigEvent](craft-events-configevent.md)



The event that is triggered when an item is removed from the config.





---

#### Example

::: code
```php
use craft\events\ParseConfigEvent;
use craft\services\ProjectConfig;
use yii\base\Event;

Event::on(ProjectConfig::class, ProjectConfig::EVENT_REMOVE_ITEM, function(ParseConfigEvent $e) {
    // Ensure the item is also removed in the database...
});
```
:::


### EVENT_UPDATE_ITEM



Type

:   [craft\events\ConfigEvent](craft-events-configevent.md)



The event that is triggered when an item is updated in the config.





---

#### Example

::: code
```php
use craft\events\ParseConfigEvent;
use craft\services\ProjectConfig;
use yii\base\Event;

Event::on(ProjectConfig::class, ProjectConfig::EVENT_UPDATE_ITEM, function(ParseConfigEvent $e) {
    // Ensure the item is also updated in the database...
});
```
:::



